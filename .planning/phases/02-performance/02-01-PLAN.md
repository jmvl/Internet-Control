# 02-01: WebP Image Conversion

<objective>
Convert all images to WebP format with JPEG fallback, achieving 25-35% file size reduction while maintaining visual quality.
</objective>

<context>
@websites/www.dinero.cash/assets/images/
@websites/www.dinero.cash/index.html
@websites/www.dinero.cash/users.html
@websites/www.dinero.cash/agents.html
@.planning/STATE.md
</context>

<tasks>
<task name="Install WebP conversion tool">
1. Check if ImageMagick is installed: `convert -version`
2. If not installed, install via Homebrew: `brew install imagemagick webp`
3. Verify installation: `cwebp -version`
4. Document conversion command for future use
</task>

<task name="Convert hero images to WebP">
1. Navigate to `assets/images/hero/`
2. For each hero image (hero-1.jpg through hero-4.jpg), run:
   ```bash
   cwebp hero-1.jpg -o hero-1.webp -q 85
   cwebp hero-2.jpg -o hero-2.webp -q 85
   cwebp hero-3.jpg -o hero-3.webp -q 85
   cwebp hero-4.jpg -o hero-4.webp -q 85
   ```
3. Verify file sizes are reduced (should be 25-35% smaller)
4. Verify visual quality is acceptable
5. Create backups of original JPGs in `backups/` subdirectory
</task>

<task name="Convert tab interface images to WebP">
1. Navigate to `assets/images/tabs/`
2. Convert each PNG to WebP:
   ```bash
   cwebp tabs-users.png -o tabs-users.webp -q 85
   cwebp tabs-business.png -o tabs-business.webp -q 85
   cwebp tabs-banks.png -o tabs-banks.webp -q 85
   ```
3. Verify file size reduction
4. Move original PNGs to `backups/`
</task>

<task name="Convert feature card images to WebP">
1. Navigate to `assets/images/wallet/`, `assets/images/payments/`, `assets/images/merchant/`, `assets/images/onboarding/`
2. Convert all 24 feature card images:
   ```bash
   # Wallet images
   for img in assets/images/wallet/*.png; do
     cwebp "$img" -o "${img%.png}.webp" -q 85
   done

   # Payments images
   for img in assets/images/payments/*.png; do
     cwebp "$img" -o "${img%.png}.webp" -q 85
   done

   # Merchant images
   for img in assets/images/merchant/*.png; do
     cwebp "$img" -o "${img%.png}.webp" -q 85
   done

   # Onboarding images
   for img in assets/images/onboarding/*.png; do
     cwebp "$img" -o "${img%.png}.webp" -q 85
   done
   ```
3. Verify all conversions completed successfully
4. Move original PNGs to `backups/`
</task>

<task name="Update HTML to use picture elements with WebP">
1. Open `index.html`
2. Find all `<img>` tags with srcset
3. Replace with `<picture>` elements:
   ```html
   <!-- Before -->
   <img src="assets/images/hero/hero-1.jpg" srcset="assets/images/hero/hero-1-500.jpg 500w, ..." alt="...">

   <!-- After -->
   <picture>
     <source srcset="assets/images/hero/hero-1.webp" type="image/webp">
     <source srcset="assets/images/hero/hero-1-500.jpg 500w, assets/images/hero/hero-1-800.jpg 800w" type="image/jpeg">
     <img src="assets/images/hero/hero-1.jpg" loading="lazy" alt="...">
   </picture>
   ```
4. Apply to hero images, tab images, and feature card images
5. Save index.html
6. Repeat for users.html and agents.html
</task>

<task name="Verify WebP fallback works">
1. Open index.html in Chrome (supports WebP)
2. Open DevTools â†’ Network tab
3. Reload page
4. Verify WebP images are loaded (check file type column)
5. Test in Safari or Firefox (also support WebP)
6. For browsers that don't support WebP (very old), verify JPEG fallback loads
7. Document any browser compatibility issues
</task>
</tasks>

<success>
- [ ] All hero images converted to WebP with JPEG backups
- [ ] All tab images converted to WebP with PNG backups
- [ ] All 24 feature card images converted to WebP with PNG backups
- [ ] Original images moved to `backups/` directories
- [ ] HTML files updated with `<picture>` elements
- [ ] WebP images load in modern browsers
- [ ] JPEG/PNG fallback works for older browsers
- [ ] File size reduction of 25-35% achieved
- [ ] Visual quality maintained (no visible artifacts)
</success>
