# 01-04: Form Label Fixes

<objective>
Fix accessibility violations by replacing placeholder-only labels with proper `<label>` elements and implementing inline form validation.
</objective>

<context>
@websites/www.dinero.cash/index.html
@websites/www.dinero.cash/contact-us.html
@websites/www.dinero.cash/assets/css/accessibility-improvements.css
@websites/www.dinero.cash/assets/js/
@.planning/STATE.md
</context>

<tasks>
<task name="Create visually-hidden label CSS class">
1. Open `assets/css/accessibility-improvements.css`
2. Add the `.visually-hidden` class:
   ```css
   /* Screen reader only content */
   .visually-hidden {
     position: absolute;
     width: 1px;
     height: 1px;
     padding: 0;
     margin: -1px;
     overflow: hidden;
     clip: rect(0, 0, 0, 0);
     white-space: nowrap;
     border: 0;
   }
   ```
3. Add error message styling:
   ```css
   .error-message {
     color: #D32F2F;
     font-size: 0.875rem;
     margin-top: 4px;
     display: none;
   }

   .error-message.visible {
     display: block;
   }

   input.invalid,
   textarea.invalid {
     border-color: #D32F2F;
   }

   input.valid,
   textarea.valid {
     border-color: #00C853;
   }
   ```
4. Save file
</task>

<task name="Fix demo form labels in index.html">
1. Open `index.html`
2. Find the demo form (search for `wf-form-Demo-Form`)
3. For each input, replace placeholder-only pattern with proper labels:

   Current pattern:
   ```html
   <input class="text-field" placeholder="Name and surname*">
   ```

   New pattern:
   ```html
   <label for="name" class="visually-hidden">Name and surname</label>
   <input id="name" class="text-field" placeholder="John Doe" required aria-required="true">
   <span class="error-message" id="name-error"></span>
   ```

4. Update all form fields:
   - Name and surname → `id="name"`, `for="name"`
   - Email → `id="email"`, `for="email"`
   - Mobile Phone → `id="phone"`, `for="phone"`
   - Country → `id="country"`, `for="country"`
   - Professional Area → `id="profession"`, `for="profession"`
5. Save index.html
</task>

<task name="Fix contact form labels in contact-us.html">
1. Open `contact-us.html`
2. Find the contact form (search for `wf-form-Contact-Form`)
3. Apply same label pattern as demo form:
   - Your Email → `id="email"`, `for="email"`
   - Your Question → `id="question"`, `for="question"`
4. Add `aria-required="true"` to required fields
5. Add error message containers
6. Save contact-us.html
</task>

<task name="Implement inline form validation JavaScript">
1. Create `assets/js/form-validation.js`
2. Add validation logic:
   ```javascript
   $(document).ready(function() {
     $('input[required], textarea[required]').on('blur', function() {
       const $input = $(this);
       const errorId = $input.attr('id') + '-error';
       const $error = $('#' + errorId);

       if (this.checkValidity()) {
         $input.removeClass('invalid').addClass('valid');
         $input.attr('aria-invalid', 'false');
         $error.removeClass('visible');
       } else {
         $input.removeClass('valid').addClass('invalid');
         $input.attr('aria-invalid', 'true');
         $error.text(this.validationMessage).addClass('visible');
       }
     });
   });
   ```
3. Save file
4. Add script reference to index.html and contact-us.html:
   ```html
   <script src="assets/js/form-validation.js" defer></script>
   ```
</task>
</tasks>

<success>
- [ ] `.visually-hidden` CSS class created
- [ ] Error message styling added to CSS
- [ ] Demo form (index.html) has proper `<label>` elements for all inputs
- [ ] Contact form (contact-us.html) has proper `<label>` elements
- [ ] All required fields have `aria-required="true"`
- [ ] Error message containers added with `id` for `aria-describedby`
- [ ] `form-validation.js` created with inline validation
- [ ] Script tags added to both HTML files
- [ ] Tab through form and verify labels work with screen reader
</success>
