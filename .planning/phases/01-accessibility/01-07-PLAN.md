# 01-07: Reduced Motion Support

<objective>
Implement `prefers-reduced-motion` detection and disable/simplify animations when user prefers reduced motion, preventing motion sickness and improving accessibility.
</objective>

<context>
@websites/www.dinero.cash/index.html
@websites/www.dinero.cash/assets/js/
@websites/www.dinero.cash/assets/css/accessibility-improvements.css
@.planning/STATE.md
</context>

<tasks>
<task name="Create reduced-motion CSS overrides">
1. Open `assets/css/accessibility-improvements.css`
2. Add `prefers-reduced-motion` media query at end of file:
   ```css
   /* Respect user's motion preferences */
   @media (prefers-reduced-motion: reduce) {
     /* Disable transitions */
     *,
     *::before,
     *::after {
       animation-duration: 0.01ms !important;
       animation-iteration-count: 1 !important;
       transition-duration: 0.01ms !important;
       scroll-behavior: auto !important;
     }

     /* Disable auto-sliding by hiding navigation */
     .w-slider-arrow-left,
     .w-slider-arrow-right,
     .hero-slide-nav {
       display: none !important;
     }

     /* Show all slides instead of rotating */
     .hero-slide {
       display: block !important;
       opacity: 1 !important;
     }
   }
   ```
3. Save file
</task>

<task name="Implement JavaScript motion detection">
1. Create `assets/js/accessibility-reduced-motion.js`
2. Add motion detection logic:
   ```javascript
   // Detect user's motion preference
   const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

   // Store preference globally for other scripts to check
   window.dineroCash = window.dineroCash || {};
   window.dineroCash.prefersReducedMotion = prefersReducedMotion;

   // Disable hero slider auto-advance if reduced motion preferred
   if (prefersReducedMotion) {
     $(document).ready(function() {
       // Remove autoplay from hero slider
       $('.hero-slider').attr('data-autoplay', 'false');

       // Remove autoplay from features slider
       $('.features-popup-slider').attr('data-autoplay', 'false');

       console.log('Auto-advance disabled: user prefers reduced motion');
     });
   }

   // Listen for changes to motion preference
   window.matchMedia('(prefers-reduced-motion: reduce)').addEventListener('change', () => {
     location.reload(); // Reload to apply changes
   });
   ```
3. Save file
</task>

<task name="Add script to index.html">
1. Open `index.html`
2. Find other `<script>` tags near end of file
3. Add reference to new accessibility script before other scripts:
   ```html
   <script src="assets/js/accessibility-reduced-motion.js"></script>
   ```
4. Save file
5. Repeat for users.html and agents.html if they have sliders/animations
</task>

<task name="Test with reduced motion enabled">
1. Open System Preferences on macOS
2. Go to Accessibility → Display → Motion
3. Check "Reduce motion"
4. Reload index.html in browser
5. Verify:
   - Hero slider does NOT auto-advance
   - No smooth scrolling
   - No transition animations
   - All content is visible (no content hidden by animations)
6. Uncheck "Reduce motion"
7. Reload page and verify animations work normally
8. Test on both Chrome and Safari
</task>
</tasks>

<success>
- [ ] `@media (prefers-reduced-motion: reduce)` CSS added to accessibility-improvements.css
- [ ] Transitions and animations disabled in reduced motion mode
- [ ] `accessibility-reduced-motion.js` created with motion detection
- [ ] Hero slider auto-advance disabled when reduced motion preferred
- [ ] Features slider auto-advance disabled when reduced motion preferred
- [ ] Script tags added to index.html, users.html, agents.html
- [ ] Tested with macOS reduced motion setting enabled
- [ ] Animations work normally when reduced motion is disabled
- [ ] No content is hidden when animations are disabled
</success>
