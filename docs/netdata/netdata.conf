# Netdata Configuration for Internet Control Infrastructure
# Custom configuration for monitoring Docker VM and infrastructure

[global]
    # Process scheduling policy
    process scheduling policy = keep

    # Update frequency (seconds)
    update every = 1

    # History retention
    history = 86400

    # Memory mode
    memory mode = dbengine

    # Page cache size
    page cache size = 32

    # Disk space for metrics (MB)
    dbengine disk space = 2048

[web]
    # Web server settings
    web files owner = root
    web files group = root
    bind to = *
    default port = 19999

    # Allow connections from local network
    allow connections from = localhost 192.168.1.*

    # Enable compression
    enable gzip compression = yes

[plugins]
    # Enable Docker monitoring
    cgroups = yes
    docker = yes

    # System monitoring
    proc = yes
    diskspace = yes

    # Network monitoring
    tc = yes

    # Disable unnecessary plugins for container environment
    apps = no
    fping = no
    charts.d = no
    python.d = yes
    go.d = yes

[health]
    # Health monitoring
    enabled = yes

    # Health check interval
    health check interval = 60

    # Enable notifications
    script to execute on alarm = /usr/libexec/netdata/plugins.d/alarm-notify.sh

# Docker container monitoring
[plugin:cgroups]
    # Monitor all Docker containers
    check for new cgroups every = 10

    # Container name patterns
    enable by default cgroups matching = /docker/*

    # Enable detailed container stats
    enable memory = yes
    enable cpu = yes
    enable blkio = yes

[plugin:proc]
    # System process monitoring
    /proc/net/dev = yes
    /proc/diskstats = yes
    /proc/meminfo = yes
    /proc/loadavg = yes
